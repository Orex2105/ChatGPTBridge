# ChatGPTBridge

Этот простой проект представляет из себя класс ```GPTQuery```, который хранится в файле [```gpt_api.py```](https://github.com/Orex2105/ChatGPTBridge/blob/main/gpt_api.py) и код самого телеграм бота, который хранится в файле [```main.py```](https://github.com/Orex2105/ChatGPTBridge/blob/main/main.py).

## Библиотеки

[```pyTelegramBotAPI```](https://pypi.org/project/pyTelegramBotAPI/) - библиотека используется для работы с Telegram API. С её помощью осуществляется управление ботом.

[```openai```](https://pypi.org/project/openai/#:~:text=The%20OpenAI%20Python%20library%20provides,reference%20and%20the%20OpenAI%20Cookbook) - библиотека для работы с API ChatGPT и DALLE.

[```sqlite3```](https://docs.python.org/3/library/sqlite3.html) - для работы с базами данных.

[```requests```](https://pypi.org/project/requests/) - для загрузки получаемых файлов при работе с DALLE.

[```datetime```](https://docs.python.org/3/library/datetime.html) - для записи времени регистрации пользователей.

[```logging```](https://docs.python.org/3/library/logging.html) - для логирования ошибок и прочих активностей.

[```traceback```](https://docs.python.org/3/library/traceback.html) - для получения ошибок и последующей записи с помощью ```logging```.

[```random```](https://docs.python.org/3/library/random.html) - для выбора эмодзи при сообщениях от бота (*просто для визуала*).


## Работа с классом ```GPTQuery```

Через этот класс осуществляются основные процессы, такие как отправка запросов к [```OpenAI```](https://openai.com/), генерация изображений, работа с базами данных, логирование активности и т.д.

Единственный аргумент, который нужно указать при инициализации - имя базы данных.

### **Методы класса**
___
#### ```__init__```
* **Описание:** Инициализирует объект класса ```GPTQuery```, устанавливает имя базы данных и уровни логирования.
При вызове указывать имя базы данных для инициализации объекта.

* **Использование:** Создание экземпляра класса GPTQuery с указанием имени базы данных.

* **Роль в main.py:** Используется для инициализации объекта класса ```GPTQuery``` и настройки логирования.

#### ```show_model```
* **Описание:** Возвращает текущую модель для указанного пользователя. При вызове указывать идентификатор пользователя для получения текущей модели.

* **Использование:** Получение текущей модели для конкретного пользователя.

* **Роль в main.py:** Используется для отображения текущей модели пользователя.

#### ```set_model```
* **Описание:** Устанавливает новую модель для указанного пользователя. При вызове указывать новую модель и идентификатор пользователя для установки модели.

* **Использование:** Установка новой модели для пользователя.

* **Роль в main.py:** Используется для изменения модели пользователя.

#### ```insert_into_history```
* **Описание:** Добавляет запрос и ответ пользователя в историю. При вызове указывать идентификатор пользователя, запрос и ответ для добавления в историю.

* **Использование:** Запись запроса и ответа пользователя в историю.

* **Роль в main.py:** Используется для сохранения истории запросов и ответов пользователя.

#### ```create_message```
* **Описание:** Создает сообщение пользователя и добавляет его в историю. При вызове указывать сообщение и идентификатор пользователя для создания сообщения и обновления истории.

* **Использование:** Формирование сообщения пользователя и обновление истории.

* **Роль в main.py:** Используется для создания сообщения пользователя и обновления истории с учетом этого сообщения.
  
#### ```delete_context```
* **Описание:** Удаляет историю запросов и ответов пользователя. При вызове указывать идентификатор пользователя для удаления контекста истории.

* **Использование:** Очистка истории запросов и ответов пользователя.

* **Роль в main.py:** Используется для удаления истории пользователя.

#### ```profile```
* **Описание:** Возвращает информацию о профиле пользователя. При вызове указывать идентификатор пользователя для получения информации о профиле.

* **Использование:** Получение информации о пользователе по его идентификатору.

* **Роль в main.py:** Используется для отображения профиля пользователя.

#### ```create_request```
* **Описание:** Создает запрос пользователя, обрабатывает его и возвращает ответ. При вызове указывать запрос и идентификатор пользователя для создания запроса и получения ответа.

* **Использование:** Формирование запроса пользователя и получение ответа.

* **Роль в main.py:** Используется для обработки запросов пользователя и генерации ответов.

#### ```generate_image```
* **Описание:** Генерирует изображение на основе запроса пользователя. При вызове указывать клиент, запрос и идентификатор пользователя для генерации изображения.

* **Использование:** Создание изображения на основе текстового запроса.

* **Роль в main.py:** Используется для генерации изображения на основе запроса пользователя.

### ```logging```
* **Описание:** Логирует ошибки в указанной функции. При вызове указывать название функции и ошибку для логирования.

* **Использование:** Логирование ошибок в определенной функции.

* **Роль в main.py:** Используется для записи ошибок и их контекста в лог-файл.
